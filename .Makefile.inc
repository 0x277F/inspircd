echo "# Insp Main Makefile" > Makefile
echo "#" >> Makefile
echo "# (C) ChatSpike development team" >> Makefile
echo "#####" >> Makefile
echo "# MAKEFILE DYNAMICLY GENERATED BY ./configure" >> Makefile
echo "# DO NOT MODIFY UNLESS YOU KNOW WHAT YOU ARE DOING!" >> Makefile
echo "#####" >> Makefile
echo "# Original Makefile & ./configure by <Craig@ChatSpike.net>" >> Makefile
echo "# Small modifications by <brain@ChatSpike.net>" >> Makefile
echo "#" >>Makefile
echo ""
echo "CC = g++" >> Makefile
echo "MAKE = $MAKEPROG" >> Makefile
echo "PROGS = inspircd" >> Makefile
echo "FLAGS = $FLAGS" >> Makefile
echo "LDLIBS = $LDLIBS" >> Makefile
echo "CONPATH = $CONFIG_DIR" >> Makefile
echo "MODPATH = $MODULE_DIR" >> Makefile
echo "BINPATH = $BINARY_DIR" >> Makefile
echo "MODULES =$MODULES" >> Makefile
echo "MAKEARGS = 'PROGS=\${PROGS}' 'FLAGS=\${FLAGS}' 'CC=\${CC}' 'LDLIBS=\${LDLIBS}' 'MODULES=\${MODULES}' 'MODPATH=\$(MODPATH)'" >> Makefile
echo "" >> Makefile
echo "all : ircd mods config bininst" >> Makefile
echo "" >> Makefile
echo "mods:" >> Makefile
echo "	\${MAKE} -C src/modules DIRNAME="src/modules" \$(MAKEARGS)" >> Makefile
echo "" >> Makefile
echo "ircd:" >> Makefile
echo "	\${MAKE} -C src DIRNAME="src" \$(MAKEARGS)" >> Makefile
echo "" >> Makefile
echo "bininst:" >> Makefile
echo "	@cp src/inspircd \$(BINPATH)" >> Makefile
echo "" >> Makefile
echo "config:" >> Makefile
if [ -n "$COPY_CONF" ] ; then
echo "	@cp conf/inspire.motd \$(CONPATH)/inspire.motd.example" >> Makefile
echo "	@cp conf/inspire.quotes \$(CONPATH)/inspire.quotes.example" >> Makefile
echo "	@cp conf/inspire.rules \$(CONPATH)/inspire.rules.example" >> Makefile
echo "	@cp docs/*.example \$(CONPATH)" >> Makefile
else
echo "	@echo \"*** Nothing to Be Done for make config\"" >> Makefile
fi
echo "clean:" >> Makefile
echo "	rm -rf src/*.o" >> Makefile
echo "	rm -rf src/modules/*.so" >> Makefile
echo "" >> Makefile
echo "modclean:" >> Makefile
echo "	rm -rf modules/*.so" >> Makefile
echo "" >> Makefile
echo "squeakyclean: modclean clean" >> Makefile
