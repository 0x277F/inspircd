<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>modules.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>modules.cpp</h1><a href="modules_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"></span>
00003 <span class="comment"></span>
00004 <span class="comment">*/</span>
00005 
00006 
00007 
00008 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
00009 <span class="preprocessor">#include &lt;iostream.h&gt;</span>
00010 <span class="preprocessor">#include "globals.h"</span>
00011 <span class="preprocessor">#include "<a class="code" href="modules_8h.html">modules.h</a>"</span>
00012 <span class="preprocessor">#include "inspircd_io.h"</span>
00013 
00014 <span class="comment">// version is a simple class for holding a modules version number</span>
00015 
<a name="l00016"></a><a class="code" href="classVersion.html#a0">00016</a> <a class="code" href="classVersion.html#a0">Version::Version</a>(<span class="keywordtype">int</span> major, <span class="keywordtype">int</span> minor, <span class="keywordtype">int</span> revision, <span class="keywordtype">int</span> build) : Major(major), Minor(minor), Revision(revision), Build(build) { };
00017 
00018 <span class="comment">// admin is a simple class for holding a server's administrative info</span>
00019 
<a name="l00020"></a><a class="code" href="classAdmin.html#a0">00020</a> <a class="code" href="classAdmin.html#a0">Admin::Admin</a>(string name, string email, string nick) : Name(name), Email(email), Nick(nick) { };
00021 
00022 <span class="comment">//</span>
00023 <span class="comment">// Announce to the world that the Module base</span>
00024 <span class="comment">// class has been created or destroyed</span>
00025 <span class="comment">//</span>
00026 
<a name="l00027"></a><a class="code" href="classModule.html#a0">00027</a> <a class="code" href="classModule.html#a0">Module::Module</a>() { }
<a name="l00028"></a><a class="code" href="classModule.html#a1">00028</a> <a class="code" href="classModule.html#a1">Module::~Module</a>() { }
<a name="l00029"></a><a class="code" href="classModule.html#a3">00029</a> <span class="keywordtype">void</span> <a class="code" href="classModule.html#a3">Module::OnUserConnect</a>(<a class="code" href="classuserrec.html">userrec</a>* user) { }
<a name="l00030"></a><a class="code" href="classModule.html#a4">00030</a> <span class="keywordtype">void</span> <a class="code" href="classModule.html#a4">Module::OnUserQuit</a>(<a class="code" href="classuserrec.html">userrec</a>* user) { }
<a name="l00031"></a><a class="code" href="classModule.html#a5">00031</a> <span class="keywordtype">void</span> <a class="code" href="classModule.html#a5">Module::OnUserJoin</a>(<a class="code" href="classuserrec.html">userrec</a>* user, <a class="code" href="classchanrec.html">chanrec</a>* channel) { }
<a name="l00032"></a><a class="code" href="classModule.html#a6">00032</a> <span class="keywordtype">void</span> <a class="code" href="classModule.html#a6">Module::OnUserPart</a>(<a class="code" href="classuserrec.html">userrec</a>* user, <a class="code" href="classchanrec.html">chanrec</a>* channel) { }
00033 <span class="keywordtype">void</span> Module::OnPacketTransmit(<span class="keywordtype">char</span> *p) { }
00034 <span class="keywordtype">void</span> Module::OnPacketReceive(<span class="keywordtype">char</span> *p) { }
<a name="l00035"></a><a class="code" href="classModule.html#a9">00035</a> <span class="keywordtype">void</span> <a class="code" href="classModule.html#a9">Module::OnRehash</a>() { }
00036 <span class="keywordtype">void</span> Module::OnServerRaw(string &amp;raw, <span class="keywordtype">bool</span> inbound) { }
<a name="l00037"></a><a class="code" href="classModule.html#a2">00037</a> <a class="code" href="classVersion.html">Version</a> <a class="code" href="classModule.html#a2">Module::GetVersion</a>() { <span class="keywordflow">return</span> <a class="code" href="classVersion.html">Version</a>(1,0,0,0); }
00038 
00039 <span class="comment">// server is a wrapper class that provides methods to all of the C-style</span>
00040 <span class="comment">// exports in the core</span>
00041 <span class="comment">//</span>
00042 
<a name="l00043"></a><a class="code" href="classServer.html#a0">00043</a> <a class="code" href="classServer.html#a0">Server::Server</a>()
00044 {
00045 }
00046 
<a name="l00047"></a><a class="code" href="classServer.html#a1">00047</a> <a class="code" href="classServer.html#a1">Server::~Server</a>()
00048 {
00049 }
00050 
<a name="l00051"></a><a class="code" href="classServer.html#a2">00051</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a2">Server::SendOpers</a>(string s)
00052 {
00053         WriteOpers(<span class="stringliteral">"%s"</span>,s.c_str());
00054 }
00055 
<a name="l00056"></a><a class="code" href="classServer.html#a3">00056</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a3">Server::Log</a>(<span class="keywordtype">int</span> level, string s)
00057 {
00058         log(level,<span class="stringliteral">"%s"</span>,s.c_str());
00059 }
00060 
<a name="l00061"></a><a class="code" href="classServer.html#a4">00061</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a4">Server::Send</a>(<span class="keywordtype">int</span> Socket, string s)
00062 {
00063         Write(Socket,<span class="stringliteral">"%s"</span>,s.c_str());
00064 }
00065 
<a name="l00066"></a><a class="code" href="classServer.html#a5">00066</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a5">Server::SendServ</a>(<span class="keywordtype">int</span> Socket, string s)
00067 {
00068         WriteServ(Socket,<span class="stringliteral">"%s"</span>,s.c_str());
00069 }
00070 
<a name="l00071"></a><a class="code" href="classServer.html#a6">00071</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a6">Server::SendFrom</a>(<span class="keywordtype">int</span> Socket, <a class="code" href="classuserrec.html">userrec</a>* User, string s)
00072 {
00073         WriteFrom(Socket,User,<span class="stringliteral">"%s"</span>,s.c_str());
00074 }
00075 
<a name="l00076"></a><a class="code" href="classServer.html#a7">00076</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a7">Server::SendTo</a>(<a class="code" href="classuserrec.html">userrec</a>* Source, <a class="code" href="classuserrec.html">userrec</a>* Dest, string s)
00077 {
00078         WriteTo(Source,Dest,<span class="stringliteral">"%s"</span>,s.c_str());
00079 }
00080 
<a name="l00081"></a><a class="code" href="classServer.html#a8">00081</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a8">Server::SendChannel</a>(<a class="code" href="classuserrec.html">userrec</a>* User, <a class="code" href="classchanrec.html">chanrec</a>* Channel, string s,<span class="keywordtype">bool</span> IncludeSender)
00082 {
00083         <span class="keywordflow">if</span> (IncludeSender)
00084         {
00085                 WriteChannel(Channel,User,<span class="stringliteral">"%s"</span>,s.c_str());
00086         }
00087         <span class="keywordflow">else</span>
00088         {
00089                 ChanExceptSender(Channel,User,<span class="stringliteral">"%s"</span>,s.c_str());
00090         }
00091 }
00092 
<a name="l00093"></a><a class="code" href="classServer.html#a9">00093</a> <span class="keywordtype">bool</span> <a class="code" href="classServer.html#a9">Server::CommonChannels</a>(<a class="code" href="classuserrec.html">userrec</a>* u1, <a class="code" href="classuserrec.html">userrec</a>* u2)
00094 {
00095         <span class="keywordflow">return</span> (common_channels(u1,u2) != 0);
00096 }
00097 
<a name="l00098"></a><a class="code" href="classServer.html#a10">00098</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a10">Server::SendCommon</a>(<a class="code" href="classuserrec.html">userrec</a>* User, string text,<span class="keywordtype">bool</span> IncludeSender)
00099 {
00100         <span class="keywordflow">if</span> (IncludeSender)
00101         {
00102                 WriteCommon(User,<span class="stringliteral">"%s"</span>,text.c_str());
00103         }
00104         <span class="keywordflow">else</span>
00105         {
00106                 WriteCommonExcept(User,<span class="stringliteral">"%s"</span>,text.c_str());
00107         }
00108 }
00109 
<a name="l00110"></a><a class="code" href="classServer.html#a11">00110</a> <span class="keywordtype">void</span> <a class="code" href="classServer.html#a11">Server::SendWallops</a>(<a class="code" href="classuserrec.html">userrec</a>* User, string text)
00111 {
00112         WriteWallOps(User,<span class="stringliteral">"%s"</span>,text.c_str());
00113 }
00114 
<a name="l00115"></a><a class="code" href="classServer.html#a12">00115</a> <span class="keywordtype">bool</span> <a class="code" href="classServer.html#a12">Server::IsNick</a>(string nick)
00116 {
00117         <span class="keywordflow">return</span> (isnick(nick.c_str()) != 0);
00118 }
00119 
<a name="l00120"></a><a class="code" href="classServer.html#a13">00120</a> <a class="code" href="classuserrec.html">userrec</a>* <a class="code" href="classServer.html#a13">Server::FindNick</a>(string nick)
00121 {
00122         <span class="keywordflow">return</span> Find(nick);
00123 }
00124 
<a name="l00125"></a><a class="code" href="classServer.html#a14">00125</a> <a class="code" href="classchanrec.html">chanrec</a>* <a class="code" href="classServer.html#a14">Server::FindChannel</a>(string channel)
00126 {
00127         <span class="keywordflow">return</span> FindChan(channel.c_str());
00128 }
00129 
<a name="l00130"></a><a class="code" href="classServer.html#a15">00130</a> string <a class="code" href="classServer.html#a15">Server::ChanMode</a>(<a class="code" href="classuserrec.html">userrec</a>* User, <a class="code" href="classchanrec.html">chanrec</a>* Chan)
00131 {
00132         string mode = cmode(User,Chan);
00133         <span class="keywordflow">return</span> mode;
00134 }
00135 
<a name="l00136"></a><a class="code" href="classServer.html#a16">00136</a> string <a class="code" href="classServer.html#a16">Server::GetServerName</a>()
00137 {
00138         <span class="keywordflow">return</span> getservername();
00139 }
00140 
<a name="l00141"></a><a class="code" href="classServer.html#a17">00141</a> string <a class="code" href="classServer.html#a17">Server::GetNetworkName</a>()
00142 {
00143         <span class="keywordflow">return</span> getnetworkname();
00144 }
00145 
<a name="l00146"></a><a class="code" href="classServer.html#a18">00146</a> <a class="code" href="classAdmin.html">Admin</a> <a class="code" href="classServer.html#a18">Server::GetAdmin</a>()
00147 {
00148         <span class="keywordflow">return</span> <a class="code" href="classAdmin.html">Admin</a>(getadminname(),getadminemail(),getadminnick());
00149 }
00150 
00151 
<a name="l00152"></a><a class="code" href="classConfigReader.html#a0">00152</a> <a class="code" href="classConfigReader.html#a0">ConfigReader::ConfigReader</a>()
00153 {
00154         <a class="code" href="classConfigReader.html#n0">fname</a> = CONFIG_FILE;
00155 }
00156 
00157 
<a name="l00158"></a><a class="code" href="classConfigReader.html#a2">00158</a> <a class="code" href="classConfigReader.html#a2">ConfigReader::~ConfigReader</a>()
00159 {
00160 }
00161 
00162 
<a name="l00163"></a><a class="code" href="classConfigReader.html#a1">00163</a> <a class="code" href="classConfigReader.html#a0">ConfigReader::ConfigReader</a>(string filename) : fname(filename) { };
00164 
<a name="l00165"></a><a class="code" href="classConfigReader.html#a3">00165</a> string <a class="code" href="classConfigReader.html#a3">ConfigReader::ReadValue</a>(string tag, string name, <span class="keywordtype">int</span> index)
00166 {
00167         <span class="keywordtype">char</span> val[MAXBUF];
00168         ReadConf(<a class="code" href="classConfigReader.html#n0">fname</a>.c_str(),tag.c_str(),name.c_str(),index,val);
00169         string s = val;
00170         <span class="keywordflow">return</span> s;
00171 }
00172 
00173 
<a name="l00174"></a><a class="code" href="classConfigReader.html#a4">00174</a> <span class="keywordtype">int</span> <a class="code" href="classConfigReader.html#a4">ConfigReader::Enumerate</a>(string tag)
00175 {
00176         <span class="keywordflow">return</span> EnumConf(<a class="code" href="classConfigReader.html#n0">fname</a>.c_str(),tag.c_str());
00177 }
00178 
00179 
<a name="l00180"></a><a class="code" href="classConfigReader.html#a5">00180</a> <span class="keywordtype">bool</span> <a class="code" href="classConfigReader.html#a5">ConfigReader::Verify</a>()
00181 {
00182         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00183 }
00184 
00185 
<a name="l00186"></a><a class="code" href="classFileReader.html#a1">00186</a> <a class="code" href="classFileReader.html#a0">FileReader::FileReader</a>(string filename)
00187 {
00188         <a class="code" href="modules_8h.html#a6">file_cache</a> c;
00189         readfile(c,filename.c_str());
00190         this-&gt;<a class="code" href="classFileReader.html#o0">fc</a> = c;
00191 }
00192 
<a name="l00193"></a><a class="code" href="classFileReader.html#a0">00193</a> <a class="code" href="classFileReader.html#a0">FileReader::FileReader</a>()
00194 {
00195 }
00196 
<a name="l00197"></a><a class="code" href="classFileReader.html#a3">00197</a> <span class="keywordtype">void</span> <a class="code" href="classFileReader.html#a3">FileReader::LoadFile</a>(string filename)
00198 {
00199         <a class="code" href="modules_8h.html#a6">file_cache</a> c;
00200         readfile(c,filename.c_str());
00201         this-&gt;<a class="code" href="classFileReader.html#o0">fc</a> = c;
00202 }
00203 
<a name="l00204"></a><a class="code" href="classFileReader.html#a2">00204</a> <a class="code" href="classFileReader.html#a2">FileReader::~FileReader</a>()
00205 {
00206 }
00207 
<a name="l00208"></a><a class="code" href="classFileReader.html#a4">00208</a> string <a class="code" href="classFileReader.html#a4">FileReader::GetLine</a>(<span class="keywordtype">int</span> x)
00209 {
00210         <span class="keywordflow">if</span> ((x&lt;0) || (x&gt;<a class="code" href="classFileReader.html#o0">fc</a>.size()))
00211                 <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
00212         <span class="keywordflow">return</span> <a class="code" href="classFileReader.html#o0">fc</a>[x];
00213 }
00214 
<a name="l00215"></a><a class="code" href="classFileReader.html#a5">00215</a> <span class="keywordtype">int</span> <a class="code" href="classFileReader.html#a5">FileReader::FileSize</a>()
00216 {
00217         <span class="keywordflow">return</span> <a class="code" href="classFileReader.html#o0">fc</a>.size();
00218 }
00219 
00220 
00221 vector&lt;Module*&gt; <a class="code" href="modules_8cpp.html#a1">modules</a>(255);
00222 vector&lt;ircd_module*&gt; <a class="code" href="modules_8cpp.html#a2">factory</a>(255);
00223 
<a name="l00224"></a><a class="code" href="modules_8cpp.html#a0">00224</a> <span class="keywordtype">int</span> <a class="code" href="modules_8cpp.html#a0">MODCOUNT</a>  = -1;
00225 
00226 
</pre></div><hr><address style="align: right;"><small>Generated on Sun Mar 30 19:34:54 2003 for InspIRCd by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
